\usepackage[italian]{babel}

% basics 
% fontenc is required in order to show straight quotes
\usepackage[T1]{fontenc}
\usepackage[colorlinks=true,linkcolor=blue,urlcolor=blue,citecolor=violet]{hyperref}
\usepackage{graphicx}
\graphicspath{ {figures/} }

\usepackage{float}
\usepackage[usenames,dvipsnames]{xcolor}

\usepackage{amsmath, mathtools, amsthm, amssymb, csquotes}
\mathtoolsset{showonlyrefs=true}
\usepackage[a4paper,margin=2.5cm]{geometry}

\usepackage{caption}
\captionsetup{belowskip=0pt}

% theorems
\makeatother
\usepackage{thmtools}
\usepackage[framemethod=TikZ]{mdframed}

\mdfsetup{skipabove=1em,skipbelow=0em}

\theoremstyle{definition}

% Style theorem boxes
\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{ForestGreen!70!black}, bodyfont=\normalfont,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=ForestGreen, backgroundcolor=ForestGreen!5,
            nobreak=false
        }
]{thmgreenbox}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{ForestGreen!70!black}, bodyfont=\normalfont,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=ForestGreen, backgroundcolor=ForestGreen!8,
            nobreak=false
        }
]{thmgreen2box}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{NavyBlue!70!black}, bodyfont=\normalfont,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=NavyBlue, backgroundcolor=NavyBlue!5,
            nobreak=false
        }
]{thmbluebox}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{TealBlue!70!black}, bodyfont=\normalfont,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=TealBlue,
            nobreak=false
        }
]{thmblueline}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{RawSienna!70!black}, bodyfont=\normalfont,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=RawSienna, backgroundcolor=RawSienna!5,
            nobreak=false
        }
]{thmredbox}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{RawSienna!70!black}, bodyfont=\normalfont,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=RawSienna, backgroundcolor=RawSienna!8,
            nobreak=false
        }
]{thmred2box}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{SeaGreen!70!black}, bodyfont=\normalfont,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=SeaGreen, backgroundcolor=SeaGreen!2,
            nobreak=false
        }
]{thmgreen3box}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{WildStrawberry!70!black}, bodyfont=\normalfont,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=WildStrawberry, backgroundcolor=WildStrawberry!5,
            nobreak=false
        }
]{thmpinkbox}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{MidnightBlue!70!black}, bodyfont=\normalfont,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=MidnightBlue, backgroundcolor=MidnightBlue!5,
            nobreak=false
        }
]{thmblue2box}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{Gray!70!black}, bodyfont=\normalfont,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=Gray, backgroundcolor=Gray!5,
            nobreak=false
        }
]{notgraybox}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{Gray!70!black}, bodyfont=\normalfont,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=Gray,
            nobreak=false
        }
]{notgrayline}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{NavyBlue!70!black}, bodyfont=\normalfont,
    numbered=no,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=NavyBlue, backgroundcolor=NavyBlue!1,
            nobreak=false
        }
]{thmexplanationbox}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{WildStrawberry!70!black}, bodyfont=\normalfont,
    numbered=no,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=WildStrawberry, backgroundcolor=WildStrawberry!1,
            nobreak=false
        }
]{thmanswerbox}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{NavyBlue!70!black}, bodyfont=\normalfont,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=NavyBlue,
            nobreak=false
        }
]{formulabox}

\declaretheorem[style=thmgreenbox, name=Definizione, numberwithin=section]{definition}
\declaretheorem[style=thmgreen2box, name=Definizione, numbered=no]{definition*}
\declaretheorem[style=thmredbox, name=Teorema, numberwithin=section]{theorem}
\declaretheorem[style=thmred2box, name=Teorema, numbered=no]{theorem*}
\declaretheorem[style=thmredbox, name=Lemma, numberwithin=section]{lemma}
\declaretheorem[style=thmredbox, name=Proposizione, numberwithin=section]{proposition}
\declaretheorem[style=thmredbox, name=Corollario, numberwithin=section]{corollary}
\declaretheorem[style=thmpinkbox, name=Problema, numberwithin=section]{problem}
\declaretheorem[style=thmpinkbox, name=Problema, numbered=no]{problem*}
\declaretheorem[style=thmblue2box, name=Affermazione, numbered=no]{claim}
\declaretheorem[style=formulabox, name=Formula, numbered=no]{formula}

% Redefine proof environment to get a full control.
\makeatletter
\renewenvironment{proof}[1][\proofname]{\par
    \pushQED{\qed}%
    \normalfont \topsep-2\p@\@plus6\p@\relax
    \trivlist
    \item[\hskip\labelsep
                \color{RawSienna!70!black}\sffamily\bfseries
                #1\@addpunct{.}]\ignorespaces
    \begin{mdframed}[linewidth=2pt,rightline=false, topline=false, bottomline=false,linecolor=RawSienna, backgroundcolor=RawSienna!1]
        }{%
        \popQED\endtrivlist\@endpefalse
    \end{mdframed}
}
\makeatother

\declaretheorem[style=thmbluebox, numbered=no, name=Esempio]{eg}
\declaretheorem[style=thmexplanationbox, numbered=no, name=Spiegazione]{tmpexplanation}
\newenvironment{explanation}[1][]{\vspace{-10pt}\pushQED{\(\circledast\)}\begin{tmpexplanation}}{\null\hfill\popQED\end{tmpexplanation}}

\declaretheorem[style=thmblueline, numbered=no, name=Osservazione]{remark}
\declaretheorem[style=thmblueline, numbered=no, name=Nota]{note}
\declaretheorem[style=thmpinkbox, numbered=no, name=Esercizio]{exercise}
\declaretheorem[style=notgrayline, numbered=no, name=Come gi√† visto]{prev}
\declaretheorem[style=thmgreen3box, numbered=no, name=Intuizione]{intuition}
\declaretheorem[style=notgraybox, numbered=no, name=Notazione]{notation}
\declaretheorem[style=thmanswerbox, numbered=no, name=Risposta]{tmpanswer}
\newenvironment{answer}[1][]{\vspace{-10pt}\pushQED{\(\circledast\)}\begin{tmpanswer}}{\null\hfill\popQED\end{tmpanswer}}

\renewcommand{\qed}{\null\hfill\(\blacksquare\)}

\newcommand{\lecture}[2]{
    \global\def\thelecture{Lezione #1: #2}
    \section*{\thelecture}
}
\usepackage{pgffor}%
\newcommand{\lec}[2]{%
    \foreach \c in {#1,...,#2}{%
            \IfFileExists{./lectures/lec_\c.tex} {%
                \input{./lectures/lec_\c.tex}%
            }{}%
        }%
}

% fancy headers
\usepackage{fancyhdr}

\fancypagestyle{plain}{
    \fancyhf{}
    \renewcommand{\headrulewidth}{0pt}
}

\fancyhf{}%
\fancyhead[LE]{\textbf{\thepage}\hskip5mm\leftmark}%
\fancyhead[RO]{\nouppercase{\rightmark}\hskip5mm\textbf{\thepage}}%
\fancyhead[LO,RE]{\thelecture}%
\renewcommand{\headrulewidth}{0pt}%

\pagestyle{fancy}

\setcounter{tocdepth}{1}